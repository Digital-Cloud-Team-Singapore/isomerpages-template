<nav class="sgds-breadcrumb margin--top margin--bottom" aria-label="breadcrumbs">
    <ul>
        {%- assign class = 'has-text-white' -%}
        {%- if page.layout == 'contact-us' -%}
            {%- assign class = '' -%}
        {%- endif -%}
        <li><a class="{{class}}" href="/">{{- "HOME" -}}</a></li>
        {%- assign splitted_url_parts = page.url | remove: "/index.html" | split: '/' -%}
        {%- assign forLoopMaxInt = splitted_url_parts.size | minus:1 -%}
        {%- comment -%} Special breadcrumb case for leftnav pages {%- endcomment -%}
        {%- if page.collection -%}
            {%- for leftnav_header in site.data.navigation -%}
                {%- capture urlized_leftnav_header -%}{{- leftnav_header.title | downcase | replace: " ", "-" -}}{%- endcapture -%}
                {%- if splitted_url_parts[1] == urlized_leftnav_header -%}
                    <li><a class="{{class}}" href="{{- leftnav_header.url -}}">{{leftnav_header.title | upcase}}</a></li>
                    {%- break -%}
                {%- endif -%}
            {%- endfor -%}
            {%- if page.collection_name and page.third_nav_title -%}
                {%- for collection_doc in site[page.collection_name] -%}
                    {%- if collection_doc.third_nav_title == page.third_nav_title -%}
                        <li><a class="{{class}}" href="{{- collection_doc.url -}}">{{page.third_nav_title | upcase}}</a></li>
                        {%- break -%}
                    {%- endif -%}
                {%- endfor -%}
            {%- endif -%}
        {%- else -%}
            {%- for i in (1..forLoopMaxInt) -%}
                {%- capture current_breadcrumb_url -%}{{next_prepender}}/{{- splitted_url_parts[i] -}}/index.html{%- endcapture -%}
                {%- capture current_breadcrumb_md_url -%}{{next_prepender}}/{{- splitted_url_parts[i] -}}/{%- endcapture -%}
                {%- capture next_prepender -%}{{next_prepender}}/{{- splitted_url_parts[i] -}}{%- endcapture -%}
                {%- for breadcrumb_page in site.pages -%}
                    {%- if current_breadcrumb_url == breadcrumb_page.permalink or current_breadcrumb_md_url == breadcrumb_page.permalink -%}
                        <li><a class="{{class}}" href="{{breadcrumb_page.url}}">{{breadcrumb_page.breadcrumb | upcase}}</a></li>
                        {%- break -%}
                    {%- endif -%}
                    {%- comment -%} Special case for the media index.html since the media page is paginated and cannot have a permalink {%- endcomment -%}
                    {%- if current_breadcrumb_url == breadcrumb_page.file_url or current_breadcrumb_md_url == breadcrumb_page.file_url -%}
                    {%- comment -%} prevent repetition of paginated pages {%- endcomment -%}
                        {%- unless breadcrumb_page.url contains 'page' -%}
                            <li><a class="{{class}}" href="{{breadcrumb_page.file_url}}">{{breadcrumb_page.breadcrumb | upcase}}</a></li>
                            {%- break -%}
                        {%- endunless -%}
                    {%- endif -%}
                {%- endfor -%}
                {%- comment -%} Repeat for collections {%- endcomment -%}
                {%- for collection in site.collections -%}
                    {%- for breadcrumb_page in collection.docs -%}
                        {%- if current_breadcrumb_url == breadcrumb_page.permalink or current_breadcrumb_md_url == breadcrumb_page.permalink  -%}
                            <li><a class="{{class}}" href="{{breadcrumb_page.url}}">{{breadcrumb_page.breadcrumb | upcase}}</a></li>
                            {%- break -%}
                        {%- endif -%}
                    {%- endfor -%}
                {%- endfor -%}
            {%- endfor -%}
        {%- endif -%}
    </ul>
</nav>
