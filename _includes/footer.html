<footer class="sgds-footer top-section">
    <div class="sgds-container is-widescreen">
        <div class="row">
            <div class="col header">
                <h5 class="sub-header has-text-white"><b>{{- site.title -}}</b></h5>
            </div>
        </div>
        <div class="row is-multiline">
            {%- comment -%}
                Left nav pages (level 2) will all belong to their own collection
                navigation.yml will simply specify the order of level 1 and level 2 pages (1 level in navigation.yml only)
                This portion of the code will automatically generate the navbar subitems for level 2 pages based on the content in the level 2 collection
                For level 3 pages, the first page in the level 3 "collection" will appear in the navbar like other level 2 pages
                Level 3 pages will also reside in the same collection as other level 2 and 3 pages under the same heading
                But they will have an additional "third_nav_title" header in their front matter

                This is done so that new level 2 pages will automatically appear in the navbar without the need for extra configuration in navigation.yml

                Subitems can still be customized by including the sublinks array
            {%- endcomment -%}

            {%- assign navitems = site.data.navigation -%}
            {%- for navitem in navitems -%}
                {%- if navitem.collection -%}
                    {%- comment -%} Leftnav page {%- endcomment -%}
                    
                    <div class="col is-3">
                        <p class="sub-header">
                            <a href="{{- navitem.url -}}">
                                <b>{{- navitem.title -}}</b>
                            </a>
                        </p>
                        {%- comment -%} You can't initalize an array in liquid so we have to do this {%- endcomment -%}
                        {% assign third_nav_titles = "" | split: ", " %}
                        {%- for leftnavpage in site[navitem.collection] -%}
                            {%- comment -%} Only show second level pages and the first page in third level pages {%- endcomment -%}
                            {%- if leftnavpage.third_nav_title -%}
                                {%- if third_nav_titles contains leftnavpage.third_nav_title -%}
                                    {%- continue -%}
                                    {%- comment -%} Contains do not support the not operator {%- endcomment -%}
                                {%- else -%}
                                    {%- comment -%} This is the first page in this third level nav, display link {%- endcomment -%}
                                    <p><a href="{{leftnavpage.url}}">
                                        {{- leftnavpage.third_nav_title -}}
                                    </a></p>
                                    {%- assign third_nav_titles = third_nav_titles | push: leftnavpage.third_nav_title -%}
                                {%- endif -%}
                            {%- else -%}
                                <p><a href="{{leftnavpage.url}}">
                                    {{- leftnavpage.title -}}
                                </a></p>
                            {%- endif -%}
                        {%- endfor -%}
                    </div>
                {%- elsif navitem.sublinks -%}
                    {%- comment -%} Leftnav page with custom sublinks {%- endcomment -%}
                    
                    <div class="col is-3">
                        {%- comment -%} Test if navitem.url starts with http:// or https:// (is external) {%- endcomment -%}
                        {%- assign external = false -%}
                        {%- assign checkArray = navitem.url | split: "https://" -%}
                        {%- if checkArray.first.size == 0 -%}
                            {%- comment -%} Starts with https:// {%- endcomment -%}
                            {%- assign external = true -%}
                        {%- else -%}
                            {%- assign checkArray = navitem.url | split: "http://" -%}
                            {%- if checkArray.first.size == 0 -%}
                                {%- comment -%} Starts with http:// {%- endcomment -%}
                                {%- assign external = true -%}
                            {%- endif -%}
                        {%- endif -%}
                        
                        {%- if external -%}
                            <p class="sub-header">
                                <a href="{{navitem.url}}" target="_blank" rel="noreferrer">
                                    <b>{{- navitem.title }} <i class="sgds-icon sgds-icon-external"></i></b>
                                </a>
                            </p>
                            </a></p>
                        {%- else -%}
                            <p class="sub-header">
                                <a href="{{- navitem.url -}}">
                                    <b>{{- navitem.title -}}</b>
                                </a>
                            </p>
                        {%- endif -%}
                        
                        {%- for sublink in navitem.sublinks -%}                 
                            {%- comment -%} Test if sublink.url starts with http:// or https:// (is external) {%- endcomment -%}
                            {%- assign external = false -%}
                            {%- assign checkArray = sublink.url | split: "https://" -%}
                            {%- if checkArray.first.size == 0 -%}
                                {%- comment -%} Starts with https:// {%- endcomment -%}
                                {%- assign external = true -%}
                            {%- else -%}
                                {%- assign checkArray = sublink.url | split: "http://" -%}
                                {%- if checkArray.first.size == 0 -%}
                                    {%- comment -%} Starts with http:// {%- endcomment -%}
                                    {%- assign external = true -%}
                                {%- endif -%}
                            {%- endif -%}
                            
                            {%- if external -%}
                                <p>
                                    <a href="{{sublink.url}}" target="_blank" rel="noreferrer">
                                        {{- sublink.title }} <i class="sgds-icon sgds-icon-external"></i>
                                    </a>
                                </p>
                            {%- else -%}
                                <p>
                                    <a href="{{sublink.url}}">
                                        {{- sublink.title -}}
                                    </a>
                                </p>
                            {%- endif -%}
                        {%- endfor -%}
                    </div>
                {%- else -%}
                    {%- comment -%} Single page {%- endcomment -%}
                    
                    {%- comment -%} Test if navitem.url starts with http:// or https:// (is external) {%- endcomment -%}
                    {%- assign external = false -%}
                    {%- assign checkArray = navitem.url | split: "https://" -%}
                    {%- if checkArray.first.size == 0 -%}
                        {%- comment -%} Starts with https:// {%- endcomment -%}
                        {%- assign external = true -%}
                    {%- else -%}
                        {%- assign checkArray = navitem.url | split: "http://" -%}
                        {%- if checkArray.first.size == 0 -%}
                            {%- comment -%} Starts with http:// {%- endcomment -%}
                            {%- assign external = true -%}
                        {%- endif -%}
                    {%- endif -%}
                    
                    {%- if external -%}
                        <div class="col is-3">
                            <p>
                                <a href="{{navitem.url}}" target="_blank" rel="noreferrer">
                                    <b>{{- navitem.title }} <i class="sgds-icon sgds-icon-external"></i></b>
                                </a>
                            </p>
                        </div>
                    {%- else -%}
                        <div class="col is-3">
                            <p>
                                <a href="{{navitem.url}}">
                                    <b>{{- navitem.title -}}</b>
                                </a>
                            </p>
                        </div>
                    {%- endif -%}
                {%- endif -%}
            {%- endfor -%}

            {%- if social -%}
            {%- comment -%} Social links for desktop {%- endcomment -%}
            <div class="col is-one-fifth is-hidden-mobile is-hidden-tablet-only" id="social-link-desktop">
                {%- if social.facebook -%}
                <a href="{{- social.facebook -}}" target="_blank" class="social-link padding--right padding--bottom is-inline-block" rel="noreferrer"><span class="sgds-icon is-size-6 sgds-icon-facebook" title="Facebook"></span></a>
                {%- endif -%}
                {%- if social.twitter -%}
                <a href="{{- social.twitter -}}" target="_blank" class="social-link padding--right padding--bottom is-inline-block" rel="noreferrer"><span class="sgds-icon is-size-6 sgds-icon-twitter" title="Twitter"></span></a>
                {%- endif -%}
                {%- if social.youtube -%}
                <a href="{{- social.youtube -}}" target="_blank" class="social-link padding--right padding--bottom is-inline-block" rel="noreferrer"><span class="sgds-icon is-size-6 sgds-icon-youtube" title="YouTube"></span></a>
                {%- endif -%}
                {%- if social.instagram -%}
                <a href="{{- social.instagram -}}" target="_blank" class="social-link padding--right padding--bottom is-inline-block" rel="noreferrer"><span class="sgds-icon is-size-6 sgds-icon-instagram" title="Instagram"></span></a>
                {%- endif -%}
                {%- if social.linkedin -%}
                <a href="{{- social.linkedin -}}" target="_blank" class="social-link padding--bottom is-inline-block" rel="noreferrer"><span class="sgds-icon is-size-6 sgds-icon-linkedin" title="LinkedIn"></span></a>
                {%- endif -%}
            </div>

            {%- comment -%} Social links for tablet {%- endcomment -%}
            <div class="col is-one-quarter is-hidden-mobile is-hidden-desktop" id="social-link-tablet">
                {%- if social.facebook -%}
                <div class="row">
                    <a href="{{- social.facebook -}}" target="_blank" class="social-link margin--bottom" title="Facebook" rel="noreferrer"><span class="sgds-icon is-size-6 sgds-icon-facebook"></span></a>
                </div>
                {%- endif -%}
                {%- if social.twitter -%}
                <div class="row">
                    <a href="{{- social.twitter -}}" target="_blank" class="social-link margin--bottom" title="Twitter" rel="noreferrer"><span class="sgds-icon is-size-6 sgds-icon-twitter"></span></a>
                </div>
                {%- endif -%}
                {%- if social.youtube -%}
                <div class="row">
                    <a href="{{- social.youtube -}}" target="_blank" class="social-link margin--bottom" title="YouTube" rel="noreferrer"><span class="sgds-icon is-size-6 sgds-icon-youtube"></span></a>
                </div>
                {%- endif -%}
                {%- if social.instagram -%}
                <div class="row">
                    <a href="{{- social.instagram -}}" target="_blank" class="social-link margin--bottom" title="Instagram" rel="noreferrer"><span class="sgds-icon is-size-6 sgds-icon-instagram"></span></a>
                </div>
                {%- endif -%}
                {%- if social.linkedin -%}
                <div class="row">
                    <a href="{{- social.linkedin -}}" target="_blank" class="social-link margin--bottom" title="LinkedIn" rel="noreferrer"><span class="sgds-icon is-size-6 sgds-icon-linkedin"></span></a>
                </div>
                {%- endif -%}
            </div>
            {%- endif -%}

            {%- comment -%} Footer links for mobile {%- endcomment -%}
            <div class="col is-hidden-tablet is-hidden-desktop">
                {%- for link in links -%}
                {%- assign linkTitle = link.title | downcase -%}
                {%- if linkTitle != "contact us" and linkTitle != "faq" -%}
                {%- if base-url == "" and link.external == true -%}
                <p><a href="{{- link.url -}}" target="_blank" rel="noreferrer">{{link.title}}</a></p>
                {%- else -%}
                <p><a href="{{- link.url -}}">{{link.title}}</a></p>
                {%- endif -%}
                {%- endif -%}
                {%- endfor -%}
            </div>

        </div>
        <div class="row">
            <div class="col is-right-desktop-only">
                <ul>
                    <li class="is-inline-block-desktop-only">
                        <p><a href="{{site.baseurl}}/contact-us/">Contact Us</a></p>
                    </li>
                    {%- if homepage.show-reach and homepage.show-reach == true -%}
                    <li class="is-inline-block-desktop-only">
                        <p><a href="https://www.reach.gov.sg/" target="_blank" rel="noreferrer" title="Link to reach.gov.sg">REACH</a></p>
                    </li>
                    {%- endif -%}
                    {%- if site.feedback_form_url -%}
                    <li class="is-inline-block-desktop-only">
                        <p><a href="{{site.feedback_form_url}}" target="_blank" rel="noreferrer">Feedback</a></p>
                    </li>
                    {%- endif -%}
                    {%- assign homepage = site.data.homepage -%}
                    {%- unless homepage.ask-jamie -%}
                    {%- if site.faq_url -%}
                    <li class="is-inline-block-desktop-only">
                        {%- if site.faq_url_external -%}
                        <p><a href="{{site.faq_url}}" target="_blank" rel="noreferrer">FAQ</a></p>
                        {%- else -%}
                        <p><a href="{{site.baseurl}}{{site.faq_url}}">FAQ</a></p>
                        {%- endif -%}
                    </li>
                    {%- endif -%}
                    {%- endunless -%}
                </ul>
            </div>
        </div>
        {%- comment -%} onclick at body tag is needed for iOS Safari to treat stuff other than <a> tags etc (e.g. div) as clickable {%- endcomment -%}
        <div class="row is-vcentered divider" onclick>
            <div class="col">
                <ul>
                    <li><a href="{{site.baseurl}}/privacy/">Privacy Statement</a></li>
                    <li><a href="{{site.baseurl}}/terms-of-use/">Terms of Use</a></li>
                    <li><a href="https://www.isomer.gov.sg">Built with Isomer</a></li>
                    {%- comment -%} <li><a>Rate Service</a></li> {%- endcomment -%}
                </ul>
            </div>
            <div class="col has-text-right-desktop has-text-right-tablet has-text-left-mobile">
                <p class="is-hidden-touch">&copy; {{ site.time | date: "%Y" }} {{site.title -}}<br>Last Updated {{site.time | date_to_string -}}</p>
                <p class="is-hidden-desktop">&copy; {{ site.time | date: "%Y" }} {{site.title -}}</p>
                <p class="is-hidden-desktop last-updated">Last Updated {{site.time | date_to_string -}}</p>
            </div>
        </div>
    </div>
</footer>

{%- include main-scripts.html -%}

